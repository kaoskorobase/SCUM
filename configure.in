AC_INIT(configure.in)
AM_INIT_AUTOMAKE(sclangx,0.0.2)
AM_CONFIG_HEADER(config.h)

AC_ISC_POSIX
AC_PROG_CC
AC_PROG_CXX
AM_PROG_CC_STDC
AC_HEADER_STDC

AC_ARG_WITH(fltk-config,
AC_HELP_STRING([--with-fltk-config],[location of the fltk-config script]))

AC_ARG_ENABLE(debug,
AC_HELP_STRING([--enable-debug],[enable debugging support]))

PKG_CHECK_MODULES(PACKAGE,["libsclang"])
AC_SUBST(PACKAGE_CFLAGS)
AC_SUBST(PACKAGE_LIBS)

if test "x${with_fltk_config}" = "x"; then
    fltk_config="fltk-config"
else
    fltk_config="$with_fltk_config"
fi

if ! which "${fltk_config}" &>/dev/null; then
    AC_MSG_ERROR([flkt-config not found])
fi

if test "x${enable_debug}" = "xyes"; then
    PACKAGE_DEBUG_CFLAGS="-g -O0"
else
    PACKAGE_DEBUG_CFLAGS="-DNDEBUG"
fi

FLTK_CFLAGS="$(${fltk_config} --cflags --use-gl)"
FLTK_LIBS="$(${fltk_config} --ldflags --use-gl)"

PACKAGE_CFLAGS="${PACKAGE_CFLAGS} -D_REENTRANT -Wno-unknown-pragmas ${PACKAGE_DEBUG_CFLAGS} ${FLTK_CFLAGS}"
PACKAGE_LIBS="${PACKAGE_LIBS} ${FLTK_LIBS}"

AC_OUTPUT([
Makefile
src/Makefile
])

dnl EOF